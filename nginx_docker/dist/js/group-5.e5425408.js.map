{"version":3,"file":"js/group-5.e5425408.js","mappings":"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","sources":["webpack://api_test_platform/./src/views/TestPlan.vue","webpack://api_test_platform/./src/views/TestPlan.vue?265e"],"sourcesContent":["<template>\n  <el-row :gutter=\"10\" style=\"height:calc(100vh - 68px);\">\n    <el-col :span=\"4\">\n      <div class=\"list_box\">\n        <!-- 标题 -->\n        <div class=\"title\">测试计划</div>\n        <!-- 按钮 -->\n        <el-button @click=\"addPlan\" icon=\"Plus\" plain type=\"success\" style=\"width: 100%;\">添加测试计划</el-button>\n        <!-- 场景列表 -->\n        <el-menu :default-active=\"active\" class=\"el-menu-vertical-demo\" active-text-color=\"#00aa7f\" text-color=\"#000000\"\n                 style=\"background: none;border: none;\">\n          <el-menu-item @click=\"getPlanData(item)\" :index=\"item.id.toString()\" v-for=\"item in planList\"\n                        style=\"height: 35px;line-height: 35px;\">\n            <el-icon>\n              <CollectionTag/>\n            </el-icon>\n            <span>{{ item.name }}</span>\n          </el-menu-item>\n        </el-menu>\n      </div>\n    </el-col>\n\n    <!--用例编辑 -->\n    <el-col :span=\"10\" v-if=\"planInfo\">\n      <!-- 基本信息 -->\n      <el-divider content-position=\"left\"><b>基本信息</b></el-divider>\n      <el-row :gutter=\"5\" style=\"margin-bottom: 20px;\">\n        <el-col :span=\"16\">\n          <el-input v-model=\"planInfo.name\" size=\"small\">\n            <template #prepend>\n              场景名称\n            </template>\n            <template #append>\n              <el-button @click=\"savePlan\" plain icon=\"CircleCheck\" size=\"small\" type=\"success\">保存</el-button>\n            </template>\n          </el-input>\n        </el-col>\n        <el-col :span=\"8\" style=\"text-align: right;\">\n          <el-button @click=\"runPlan\" plain size=\"small\" type=\"success\" icon=\"Promotion\">运行</el-button>\n          <el-button @click=\"delPlan\" plain icon=\"Delete\" size=\"small\" type=\"danger\">删除</el-button>\n        </el-col>\n      </el-row>\n      <!-- 测试场景列表 -->\n      <el-divider content-position=\"left\"><b>测试场景</b></el-divider>\n      <el-button @click=\"drawer = true\" plain icon=\"Plus\" size=\"small\" type=\"success\">添加</el-button>\n      <el-table :data=\"scenes\" row-key=\"id\" style=\"width: 100%;margin-bottom: 10px;\" :show-header=\"false\"\n                height=\"calc(100vh - 235px)\">\n        <el-table-column>\n          <template #default=\"scope\">\n            <span style=\"color: #009A71;font-weight: bold;font-size: 14px;\">{{\n                '测试场景' + (scope.$index + 1) + ': '\n              }}</span>\n            <span style=\"font-weight: bold;font-size: 14px;\">{{ scope.row.name }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column width=\"100px\">\n          <template #default=\"scope\">\n            <el-button @click=\"delPlanInScene(scope.$index)\" plain size=\"small\" type=\"danger\" icon=\"Delete\">删除\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n\n    </el-col>\n    <el-col :span=\"10\">\n      <el-divider content-position=\"left\"><b>通过率趋势图</b></el-divider>\n      <!-- 通过率趋势图 -->\n      <div ref=\"chartTable\" class=\"char_box1\"></div>\n\n      <el-divider content-position=\"left\"><b>执行记录</b></el-divider>\n      <!-- 执行记录 -->\n\n      <el-table :data=\"records\" class=\"table-style\" size=\"small\" height=\"calc(100vh - 380px)\">\n        <el-table-column prop=\"created_time\" label=\"执行时间\" min-width=\"140\"></el-table-column>\n        <el-table-column prop=\"env_name\" label=\"测试环境\" min-width=\"110\"></el-table-column>\n        <el-table-column prop=\"all\" label=\"总用例\" min-width=\"50\">\n          <template #default=\"scope\">\n            <span v-if=\"scope.row.status === 'finished'\">{{ scope.row.all }}</span>\n            <span v-else>执行中</span>\n          </template>\n        </el-table-column>\n\n        <el-table-column label=\"通过数\" min-width=\"50\">\n          <template #default=\"scope\">\n            <span v-if=\"scope.row.status === 'finished'\">{{ scope.row.success }}</span>\n            <span v-else>执行中</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"通过率\" min-width=\"80\">\n          <template #default=\"scope\">\n            <span v-if=\"scope.row.status === 'finished'\">{{ scope.row.pass_rate + '%' }}</span>\n            <span v-else>执行中</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"测试报告\" width=\"100\">\n          <template #default=\"scope\">\n\t\t\t\t\t\t<span v-if=\"scope.row.status === '执行中'\">\n\t\t\t\t\t\t\t<el-tag>{{scope.row.status }}...</el-tag>\n\t\t\t\t\t\t</span>\n            <el-button v-else type=\"success\" icon=\"View\" plain size=\"small\"\n                       @click=\"$router.push({ name: 'report', params: { id: scope.row.id } })\">报告\n            </el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-col>\n  </el-row>\n\n  <!-- 添加测试场景到测试计划中 -->\n  <el-drawer v-model=\"drawer\" direction=\"rtl\" size=\"20%\" :show-close=\"false\">\n    <template #header>\n      <b style=\"color: #000000;\">添加测试流程</b>\n    </template>\n    <div class=\"select_content\">\n      <el-table ref=\"addRef\" @selection-change=\"selectTable\" size=\"small\" :data=\"Scenes2\" tooltip-effect=\"dark\"\n                style=\"width: 100%\">\n        <el-table-column type=\"selection\" min-width=\"40\"></el-table-column>\n        <el-table-column prop=\"name\" label=\"全选\" min-width=\"120\"></el-table-column>\n      </el-table>\n    </div>\n    <div style=\"margin: 10px; text-align: center;\">\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"添加选中测试流程到任务中\" placement=\"top-start\">\n        <el-button @click=\"addSceneToPlan\" plain type=\"success\" size=\"small\">确认添加</el-button>\n      </el-tooltip>\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"清除选中选项\" placement=\"top-start\">\n        <el-button plain type=\"warning\" size=\"small\" @click=\"$refs.addRef.clearSelection()\">清除选中</el-button>\n      </el-tooltip>\n      <el-tooltip class=\"item\" effect=\"dark\" content=\"关闭当前窗口\" placement=\"top-start\">\n        <el-button plain type=\"danger\" size=\"small\" @click=\"drawer = false\">关闭窗口</el-button>\n      </el-tooltip>\n    </div>\n  </el-drawer>\n</template>\n\n<script>\nimport {mapState} from 'vuex';\nimport {ElNotification} from 'element-plus';\nimport {ElMessage, ElMessageBox} from 'element-plus';\n\nexport default {\n  data() {\n    return {\n      // 选中激活的测试计划id\n      active: '1',\n      // 测试计划列表\n      planList: [],\n      // 当前选中的测试计划信息\n      planInfo: null,\n      // 测试计划中的所有测试场景\n      scenes: [],\n      // 测试计划中所有运行记录\n      records: [],\n      // 添加测试场景的弹框\n      drawer: false,\n      // 存储勾选要添加到计划中的测试场景\n      addSceneList: []\n    }\n  },\n  computed: {\n    ...mapState(['pro', 'envId', 'testScenes']),\n    chartData: function () {\n      let runDate = [];\n      let passRate = [];\n\n      for (let item of this.records) {\n        runDate.push(this.$date.rTime(item.create_time));\n        passRate.push(parseFloat(item.pass_rate).toFixed(2));\n      }\n      return {\n        label: runDate.reverse(),\n        value: passRate.reverse()\n      }\n    },\n    // 可以添加到任务中的套件\n    Scenes2: function () {\n      // 获取计划中没有添加的所有测试场景\n      let newSuites = this.testScenes.filter((item, index) => {\n        return !this.scenes.find(item2 => {\n          return item2.id == item.id;\n        });\n      });\n      return newSuites;\n    }\n  },\n  methods: {\n    // 获取所有测试计划\n    async getAllPlan() {\n      const response = await this.$api.getTestPlan(this.pro.id);\n      if (response.status === 200) {\n        this.planList = response.data;\n        // 设置默认激活的测试计划,并获取数据\n        if (this.planList.length > 0 && this.planInfo == null) {\n          this.active = this.planList[0].id.toString();\n          this.getPlanData(this.planList[0]);\n        }\n      }\n    },\n    // 获取测试计划下所有的测试场景\n    async getPlanData(plan) {\n      this.planInfo = {...plan};\n      // 获取测试计划下所有的测试场景\n      const response = await this.$api.getTestScene({testplan: plan.id})\n      if (response.status === 200) {\n        this.scenes = response.data;\n      }\n      this.getAllRecord();\n    },\n    // 获取测试计划所有的执行记录\n    async getAllRecord() {\n      const response2 = await this.$api.getTestRecord({plan: this.planInfo.id});\n      if (response2.status == 200) {\n        this.records = response2.data;\n      }\n    },\n    // 添加测试计划\n    async addPlan() {\n      const params = {\n        project: this.pro.id,\n        name: 'New Plan'\n      };\n      const response = await this.$api.createTestPlan(params);\n      if (response.status === 201) {\n        this.$message({\n          type: 'success',\n          message: '添加成功',\n          duration: 1000\n        });\n        this.getAllPlan();\n      }\n    },\n    // 保存修改的测试计划名\n    async savePlan() {\n      const response = await this.$api.updateTestPlan(this.planInfo.id, this.planInfo);\n      if (response.status === 200) {\n        this.$message({\n          type: 'success',\n          message: '保存成功',\n          duration: 1000\n        });\n        this.getAllPlan();\n      }\n    },\n    // 运行测试计划\n    async runPlan() {\n      if (this.envId) {\n        const params = {\n          env: this.envId,\n          plan: this.planInfo.id\n        };\n        this.$message({\n          type: 'success',\n          message: '开始运行!',\n          duration: 1000\n        });\n        const response = await this.$api.runTest(params);\n        if (response.status === 200) {\n          ElNotification({\n            title: '提示',\n            message: response.data.status,\n            duration: 1000\n          });\n          this.getAllRecord();\n        }\n      } else {\n        this.$message({\n          type: 'warning',\n          message: '当前未选中测试环境!',\n          duration: 1000\n        });\n      }\n    },\n    // 删除测试计划\n    delPlan() {\n      ElMessageBox.confirm('确定要删除吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n          .then(async () => {\n            const response = await this.$api.delTestPlan(this.planInfo.id);\n            if (response.status === 204) {\n              ElMessage({\n                type: 'success',\n                message: '删除成功',\n                duration: 1000\n              });\n              this.getAllPlan();\n            }\n          })\n          .catch(() => {\n            ElMessage({\n              type: 'info',\n              message: '取消删除',\n              duration: 1000\n            });\n          });\n    },\n    selectTable(val) {\n      // 将选中的测试场景id保存到addSceneList中\n      this.addSceneList = []\n      val.forEach(item => {\n        this.addSceneList.push(item.id);\n      });\n    },\n    // 添加选中的测试场景到测试计划中\n    async addSceneToPlan() {\n      let params = {...this.planInfo};\n      params.scenes.push(...this.addSceneList);\n      // 发送请求\n      const response = await this.$api.updateTestPlan(params.id, params);\n      if (response.status === 200) {\n        this.$message({\n          type: 'success',\n          message: '添加成功',\n          duration: 1000\n        });\n        // 更新页面数据\n        this.planInfo = response.data;\n        this.getPlanData(this.planInfo);\n      }\n      // 清空选中的选项\n      this.$refs.addRef.clearSelection();\n    },\n    // 删除测试计划中的测试场景\n    async delPlanInScene(index) {\n      let params = {...this.planInfo};\n      params.scenes.splice(index, 1);\n      const response = await this.$api.updateTestPlan(params.id, params);\n      if (response.status === 200) {\n        this.$message({\n          type: 'success',\n          message: '删除成功',\n          duration: 1000\n        });\n        // 更新页面中当前任务的数据\n        this.planInfo = response.data;\n        this.getPlanData(this.planInfo);\n      }\n    }\n  },\n  created() {\n    this.getAllPlan();\n  },\n  watch: {\n    records(val) {\n      if (val) {\n        // 渲染通过率趋势图\n        this.$chart.chart3(this.$refs.chartTable, this.chartData.value, this.chartData.label);\n      }\n    }\n  }\n};\n</script>\n\n<style scoped>\n.list_box {\n  height: calc(100vh - 68px);\n  box-shadow: 0 0 5px #00aa7f;\n}\n\n.list_box .title {\n  text-align: center;\n  font: bold 20px/40px 'microsoft yahei';\n  border-bottom: solid 4px #b3b3b3;\n}\n\n/* 显示图标的框 */\n.char_box1 {\n  height: 200px;\n}\n</style>\n","import { render } from \"./TestPlan.vue?vue&type=template&id=a32bb25a&scoped=true\"\nimport script from \"./TestPlan.vue?vue&type=script&lang=js\"\nexport * from \"./TestPlan.vue?vue&type=script&lang=js\"\n\nimport \"./TestPlan.vue?vue&type=style&index=0&id=a32bb25a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-a32bb25a\"]])\n\nexport default __exports__"],"names":["class","style","ref","_createVNode","_component_el_row","gutter","_component_el_col","span","_createElementVNode","_hoisted_1","_component_el_button","onClick","$options","addPlan","icon","plain","type","_cache","_component_el_menu","$data","active","_createElementBlock","_Fragment","_renderList","planList","item","_createBlock","_component_el_menu_item","$event","getPlanData","index","id","toString","_component_el_icon","_component_CollectionTag","_toDisplayString","name","planInfo","_component_el_divider","_component_el_input","size","prepend","_withCtx","append","savePlan","runPlan","delPlan","drawer","_component_el_table","data","scenes","height","_component_el_table_column","default","scope","_hoisted_2","$index","_hoisted_3","row","width","delPlanInScene","_hoisted_4","records","prop","label","status","_hoisted_5","all","_hoisted_6","_hoisted_7","success","_hoisted_8","_hoisted_9","pass_rate","_hoisted_10","_hoisted_11","_component_el_tag","_ctx","$router","push","params","_component_el_drawer","direction","header","_hoisted_12","onSelectionChange","selectTable","Scenes2","_hoisted_13","_component_el_tooltip","effect","content","placement","addSceneToPlan","$refs","addRef","clearSelection","addSceneList","computed","mapState","chartData","runDate","passRate","this","$date","rTime","create_time","parseFloat","toFixed","reverse","value","newSuites","testScenes","filter","find","item2","methods","getAllPlan","response","$api","getTestPlan","pro","length","plan","getTestScene","testplan","getAllRecord","response2","getTestRecord","project","createTestPlan","$message","message","duration","updateTestPlan","envId","env","runTest","ElNotification","title","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","async","delTestPlan","ElMessage","catch","val","forEach","splice","created","watch","$chart","chart3","chartTable","__exports__","render"],"sourceRoot":""}