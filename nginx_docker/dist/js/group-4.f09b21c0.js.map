{"version":3,"file":"js/group-4.f09b21c0.js","mappings":"8MAGWA,MAAM,Y,0VAFfC,EAAAA,EAAAA,IA8DSC,EAAA,CA9DAC,OAAQ,IAAE,C,kBACjB,IAmBS,EAnBTC,EAAAA,EAAAA,IAmBSC,EAAA,CAnBAC,KAAM,GAAC,C,kBACd,IAiBM,EAjBNC,EAAAA,EAAAA,IAiBM,MAjBNC,EAiBM,EAhBJJ,EAAAA,EAAAA,IAeeK,EAAA,CAfDC,OAAO,uBAAqB,C,kBACxC,IAAiC,cAAjCH,EAAAA,EAAAA,IAAiC,OAA5BP,MAAM,aAAY,QAAI,KAC3BI,EAAAA,EAAAA,IACYO,EAAA,CADAC,QAAOC,EAAAC,OAAQC,KAAK,UAAUC,MAAA,GAAMC,KAAK,QAAQC,MAAA,eAAqBC,KAAK,Q,mBAAO,IAC9FC,EAAA,KAAAA,EAAA,aAD8F,e,4BAG9FhB,EAAAA,EAAAA,IASUiB,EAAA,CATA,iBAAgBC,EAAAC,OAAQvB,MAAM,wBAAwB,oBAAkB,UACzE,aAAW,UAAUkB,MAAA,mC,mBACuC,IAAwB,gBAA3FM,EAAAA,EAAAA,IAMeC,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IANmEC,EAAAC,UAARC,K,WAA1E5B,EAAAA,EAAAA,IAMe6B,EAAA,CANAlB,QAAKmB,GAAElB,EAAAmB,UAAUH,GAAQI,MAAOJ,EAAKK,GAAGC,WACzCjB,MAAA,sC,mBACZ,IAEU,EAFVd,EAAAA,EAAAA,IAEUgC,EAAA,M,kBADR,IAAa,EAAbhC,EAAAA,EAAAA,IAAaiC,M,OAEf9B,EAAAA,EAAAA,IAA4B,aAAA+B,EAAAA,EAAAA,IAAnBT,EAAKU,MAAI,M,iGAMJjB,EAAAkB,UAAO,WAA/BvC,EAAAA,EAAAA,IAqCSI,EAAA,C,MArCAC,KAAM,G,mBACb,IAmCe,EAnCfF,EAAAA,EAAAA,IAmCeK,EAAA,CAnCDC,OAAO,uBAAqB,C,kBACxC,IAA6B,gBAA7BH,EAAAA,EAAAA,IAA6B,OAAxBP,MAAM,SAAQ,QAAI,KACvBI,EAAAA,EAAAA,IAIWqC,EAAA,C,WAJQnB,EAAAkB,QAAQD,K,qCAARjB,EAAAkB,QAAQD,KAAIR,GAAEW,YAAY,Q,CAChCC,SAAOC,EAAAA,EAAAA,KAAC,IAEnBxB,EAAA,KAAAA,EAAA,aAFmB,a,wBAIrBhB,EAAAA,EAAAA,IAIWqC,EAAA,C,WAJQnB,EAAAkB,QAAQK,K,qCAARvB,EAAAkB,QAAQK,KAAId,GAAEW,YAAY,SAASxB,MAAA,sB,CACzCyB,SAAOC,EAAAA,EAAAA,KAAC,IAEnBxB,EAAA,MAAAA,EAAA,cAFmB,e,sCAIrBb,EAAAA,EAAAA,IAA6B,OAAxBP,MAAM,SAAQ,QAAI,KACvBI,EAAAA,EAAAA,IAOU0C,EAAA,CAPD/B,KAAK,cAAcf,MAAM,a,mBAChC,IAEc,EAFdI,EAAAA,EAAAA,IAEc2C,EAAA,CAFDC,MAAM,SAAO,C,kBACxB,IAA0D,EAA1D5C,EAAAA,EAAAA,IAA0D6C,EAAA,C,WAAzC3B,EAAAkB,QAAQU,Q,qCAAR5B,EAAAkB,QAAQU,QAAOnB,GAAErB,OAAO,S,iCAE3CN,EAAAA,EAAAA,IAEc2C,EAAA,CAFDC,MAAM,SAAO,C,kBACxB,IAAqD,EAArD5C,EAAAA,EAAAA,IAAqD6C,EAAA,C,WAApC3B,EAAAkB,QAAQW,G,qCAAR7B,EAAAkB,QAAQW,GAAEpB,GAAErB,OAAO,S,wDAGxCH,EAAAA,EAAAA,IAA6B,OAAxBP,MAAM,SAAQ,QAAI,KACvBI,EAAAA,EAAAA,IAOU0C,EAAA,CAPD/B,KAAK,cAAcf,MAAM,a,mBAChC,IAEc,EAFdI,EAAAA,EAAAA,IAEc2C,EAAA,CAFDC,MAAM,QAAM,C,kBACvB,IAAmE,EAAnE5C,EAAAA,EAAAA,IAAmE6C,EAAA,C,WAAlD3B,EAAAkB,QAAQY,iB,qCAAR9B,EAAAkB,QAAQY,iBAAgBrB,GAAErB,OAAO,S,iCAEpDN,EAAAA,EAAAA,IAEc2C,EAAA,CAFDC,MAAM,UAAQ,C,kBACzB,IAA0E,EAA1E5C,EAAAA,EAAAA,IAA0E6C,EAAA,C,WAAzD3B,EAAAkB,QAAQa,wB,qCAAR/B,EAAAkB,QAAQa,wBAAuBtB,GAAErB,OAAO,S,yCAGcY,EAAAkB,UAAO,WAAlFvC,EAAAA,EAAAA,IAIWqD,EAAA,C,MAJDC,SAAS,SAAUC,OAAQ,GAAItC,MAAA,yB,mBACvC,IAAoF,EAApFd,EAAAA,EAAAA,IAAoFO,EAAA,CAAxEC,QAAOC,EAAA4C,QAAS1C,KAAK,UAAUC,MAAA,GAAMG,KAAK,e,mBAAc,IAAIC,EAAA,MAAAA,EAAA,cAAJ,Y,6BACpEhB,EAAAA,EAAAA,IAAoFO,EAAA,CAAxEC,QAAOC,EAAA6C,QAAS3C,KAAK,UAAUC,MAAA,GAAMG,KAAK,e,mBAAc,IAAIC,EAAA,MAAAA,EAAA,cAAJ,Y,6BACpEhB,EAAAA,EAAAA,IAA6EO,EAAA,CAAjEC,QAAOC,EAAA8C,OAAQ5C,KAAK,SAASC,MAAA,GAAMG,KAAK,U,mBAAS,IAAIC,EAAA,MAAAA,EAAA,cAAJ,Y,uGAI1CE,EAAAkB,UAAO,WAAhCvC,EAAAA,EAAAA,IAESI,EAAA,C,MAFAC,KAAM,I,mBACb,IAAyG,EAAzGF,EAAAA,EAAAA,IAAyG6C,EAAA,C,WAAxF3B,EAAAkB,QAAQoB,Y,qCAARtC,EAAAkB,QAAQoB,YAAW7B,GAAErB,OAAO,qBAAqBmD,KAAK,SAASC,MAAM,W,oGAc5F,GACEC,WAAY,CACVC,OAAMA,EAAAA,GAERC,IAAAA,GACE,MAAO,CACL1C,OAAQ,IACRiB,QAAS,KAEb,EACA0B,SAAU,KACLC,EAAAA,EAAAA,IAAS,CAAC,MAAO,cAEtBC,QAAS,KACJC,EAAAA,EAAAA,IAAW,CAAC,eAEf,YAAMvD,GACJ,IACE,MAAMwD,EAAS,CACbC,QAASC,KAAKC,IAAIvC,GAClBK,KAAM,UACNW,QAAS,CAAC,EACVC,GAAI,CAAC,EACLC,iBAAkB,CAAC,EACnBC,wBAAyB,CAAC,EAC1BO,YAAa,IAETc,QAAiBF,KAAKG,KAAKC,eAAeN,GACxB,MAApBI,EAASG,SACXL,KAAKM,SAASC,QAAQ,QACtBP,KAAKQ,aAET,CAAE,MAAOC,GAEPT,KAAKM,SAASG,MAAM,SAASA,EAAMC,UACrC,CACF,EAEA,YAAMvB,GACJwB,EAAAA,EAAaC,QAAQ,UAAW,KAAM,CACpCC,kBAAmB,KACnBC,iBAAkB,KAClBvE,KAAM,YAEHwE,MAAKC,UACJ,MAAMd,QAAiBF,KAAKG,KAAKc,YAAYjB,KAAKhC,QAAQN,IAClC,MAApBwC,EAASG,UACXa,EAAAA,EAAAA,IAAU,CACR3E,KAAM,UACNmE,QAAS,OACTS,SAAU,MAEZnB,KAAKQ,aAEDR,KAAK5C,SAASgE,OAAS,IAEzBpB,KAAKjD,OAASiD,KAAK5C,SAAS,GAAGM,GAAGC,WAClCqC,KAAKxC,UAAUwC,KAAK5C,SAAS,SAIlCiE,OAAM,MACLH,EAAAA,EAAAA,IAAU,CACR3E,KAAM,OACNmE,QAAS,OACTS,SAAU,QAGpB,EAGA,aAAMlC,GACJ,IAAIa,EAAS,IAAIE,KAAKhC,SACtB8B,EAAOpB,QAAU4C,KAAKC,MAAMvB,KAAKhC,QAAQU,SACzCoB,EAAOnB,GAAK2C,KAAKC,MAAMvB,KAAKhC,QAAQW,IACpCmB,EAAOjB,wBAA0ByC,KAAKC,MAAMvB,KAAKhC,QAAQa,yBACzDiB,EAAOlB,iBAAmB0C,KAAKC,MAAMvB,KAAKhC,QAAQY,kBAClD,MAAMsB,QAAiBF,KAAKG,KAAKqB,eAAe1B,EAAOpC,GAAIoC,GACnC,MAApBI,EAASG,SACXL,KAAKM,SAAS,CACZ/D,KAAM,UACNmE,QAAS,OACTS,SAAU,MAEZnB,KAAKQ,aAET,EAEA,aAAMtB,GACJ,IAAIY,EAAS,IAAIE,KAAKhC,SACtB8B,EAAO/B,KAAO+B,EAAO/B,KAAO,QAC5B+B,EAAOpB,QAAU4C,KAAKC,MAAMvB,KAAKhC,QAAQU,SACzCoB,EAAOnB,GAAK2C,KAAKC,MAAMvB,KAAKhC,QAAQW,IACpCmB,EAAOjB,wBAA0ByC,KAAKC,MAAMvB,KAAKhC,QAAQa,yBACzDiB,EAAOlB,iBAAmB0C,KAAKC,MAAMvB,KAAKhC,QAAQY,kBAClD,MAAMsB,QAAiBF,KAAKG,KAAKC,eAAeN,GACxB,MAApBI,EAASG,SACXL,KAAKM,SAAS,CACZ/D,KAAM,UACNmE,QAAS,OACTS,SAAU,MAEZnB,KAAKQ,aAET,EAEAhD,SAAAA,CAAUiE,GACRzB,KAAKjD,OAAS0E,EAAI/D,GAAGC,WACrBqC,KAAKhC,QAAU,IACVyD,EACH/C,QAAS+C,EAAI/C,QAAU4C,KAAKI,UAAUD,EAAI/C,QAAS,KAAM,GAAK,KAC9DC,GAAI8C,EAAI9C,GAAK2C,KAAKI,UAAUD,EAAI9C,GAAI,KAAM,GAAK,KAC/CE,wBAAyB4C,EAAI5C,wBAA0ByC,KAAKI,UAAUD,EAAI5C,wBAAyB,KAAM,GAAK,KAC9GD,iBAAkB6C,EAAI7C,iBAAmB0C,KAAKI,UAAUD,EAAI7C,iBAAkB,KAAM,GAAK,KAE7F,GAEF+C,OAAAA,GACE3B,KAAKQ,YACP,EACAoB,OAAAA,GACM5B,KAAK5C,SAASgE,OAAS,GAEzBpB,KAAKxC,UAAUwC,KAAK5C,SAAS,GAEjC,G,UCjMF,MAAMyE,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAEzF,O","sources":["webpack://api_test_platform/./src/views/TestEnv.vue","webpack://api_test_platform/./src/views/TestEnv.vue?ff5b"],"sourcesContent":["<template>\n  <el-row :gutter=\"10\">\n    <el-col :span=\"4\">\n      <div class=\"list_box\">\n        <el-scrollbar height=\"calc(100vh - 144px)\">\n          <div class=\"top-title\">测试环境</div>\n          <el-button @click=\"addEnv\" type=\"success\" plain size=\"small\" style=\"width: 100%;\" icon=\"Plus\">创建测试环境\n          </el-button>\n\n          <el-menu :default-active=\"active\" class=\"el-menu-vertical-demo\" active-text-color=\"#00aa7f\"\n                   text-color=\"#000000\" style=\"background: none;border: none;\">\n            <el-menu-item @click='selectEnv(item)' :index=\"item.id.toString()\" v-for=\"item in testEnvs\"\n                          style=\"height: 35px;line-height: 35px;\">\n              <el-icon>\n                <Coin></Coin>\n              </el-icon>\n              <span>{{ item.name }}</span>\n            </el-menu-item>\n          </el-menu>\n        </el-scrollbar>\n      </div>\n    </el-col>\n    <el-col :span=\"8\" v-if=\"EnvInfo\">\n      <el-scrollbar height=\"calc(100vh - 70px )\">\n        <div class=\"title\">基本信息</div>\n        <el-input v-model=\"EnvInfo.name\" placeholder=\"环境名称\">\n          <template #prepend>\n            环境名\n          </template>\n        </el-input>\n        <el-input v-model=\"EnvInfo.host\" placeholder=\"hots地址\" style=\"margin-top: 5px;\">\n          <template #prepend>\n            服务器域名\n          </template>\n        </el-input>\n        <div class=\"title\">基本配置</div>\n        <el-tabs type=\"border-card\" class=\"demo-tabs\">\n          <el-tab-pane label=\"全局请求头\">\n            <Editor v-model=\"EnvInfo.headers\" height=\"250px\"></Editor>\n          </el-tab-pane>\n          <el-tab-pane label=\"数据库配置\">\n            <Editor v-model=\"EnvInfo.db\" height=\"250px\"></Editor>\n          </el-tab-pane>\n        </el-tabs>\n        <div class=\"title\">全局变量</div>\n        <el-tabs type=\"border-card\" class=\"demo-tabs\">\n          <el-tab-pane label=\"全局变量\">\n            <Editor v-model=\"EnvInfo.global_variables\" height=\"250px\"></Editor>\n          </el-tab-pane>\n          <el-tab-pane label=\"调试运行变量\">\n            <Editor v-model=\"EnvInfo.debug_globals_variables\" height=\"250px\"></Editor>\n          </el-tab-pane>\n        </el-tabs>\n        <el-affix position=\"bottom\" :offset=\"20\" style=\"text-align: center;\" v-if=\"EnvInfo\">\n          <el-button @click='saveEnv' type=\"success\" plain icon=\"CircleCheck\">保存编辑</el-button>\n          <el-button @click='copyEnv' type=\"success\" plain icon=\"CircleCheck\">复制环境</el-button>\n          <el-button @click=\"delEnv\" type=\"danger\" plain icon=\"Delete\">删除环境</el-button>\n        </el-affix>\n      </el-scrollbar>\n    </el-col>\n    <el-col :span=\"12\" v-if=\"EnvInfo\">\n      <Editor v-model=\"EnvInfo.global_func\" height=\"calc(100vh - 65px)\" lang=\"python\" theme=\"monokai\"></Editor>\n    </el-col>\n  </el-row>\n</template>\n\n<script>\n/*\n功能实现:\n\t测试环境的增删查改\n*/\nimport {mapState, mapActions} from 'vuex';\nimport Editor from '../components/CodeEdit.vue';\nimport {ElMessage, ElMessageBox} from 'element-plus';\n\nexport default {\n  components: {\n    Editor\n  },\n  data() {\n    return {\n      active: '1',\n      EnvInfo: null,\n    };\n  },\n  computed: {\n    ...mapState(['pro', 'testEnvs'])\n  },\n  methods: {\n    ...mapActions(['getAllEnvs']),\n    // 创建环境\n    async addEnv() {\n      try {\n        const params = {\n          project: this.pro.id,\n          name: \"New Env\",\n          headers: {},  // 必须提供空对象而非字符串\n          db: {},       // 必须提供空对象而非字符串\n          global_variables: {},  // 关键字段必须提供\n          debug_globals_variables: {},  // 关键字段必须提供\n          global_func: \"\"  // 根据你的组件，这个字段也需要\n        };\n        const response = await this.$api.createTestEnvs(params);\n        if (response.status === 201) {\n          this.$message.success('添加成功');\n          this.getAllEnvs();\n        }\n      } catch (error) {\n\n        this.$message.error(`创建失败: ${error.message}`);\n      }\n    },\n    // 删除环境\n    async delEnv() {\n      ElMessageBox.confirm('确定要删除吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      })\n          .then(async () => {\n            const response = await this.$api.delTestEnvs(this.EnvInfo.id);\n            if (response.status === 204) {\n              ElMessage({\n                type: 'success',\n                message: '删除成功',\n                duration: 1000\n              });\n              this.getAllEnvs();\n              // 重新选中环境\n              if (this.testEnvs.length > 0) {\n                // 设置默认显示激活的测试场景\n                this.active = this.testEnvs[0].id.toString();\n                this.selectEnv(this.testEnvs[0]);\n              }\n            }\n          })\n          .catch(() => {\n            ElMessage({\n              type: 'info',\n              message: '取消删除',\n              duration: 1000\n            });\n          });\n    },\n\n    // 保存修改\n    async saveEnv() {\n      let params = {...this.EnvInfo}\n      params.headers = JSON.parse(this.EnvInfo.headers);\n      params.db = JSON.parse(this.EnvInfo.db);\n      params.debug_globals_variables = JSON.parse(this.EnvInfo.debug_globals_variables);\n      params.global_variables = JSON.parse(this.EnvInfo.global_variables);\n      const response = await this.$api.updateTestEnvs(params.id, params)\n      if (response.status === 200) {\n        this.$message({\n          type: 'success',\n          message: '保存成功',\n          duration: 1000\n        });\n        this.getAllEnvs();\n      }\n    },\n    // 复制环境\n    async copyEnv() {\n      let params = {...this.EnvInfo}\n      params.name = params.name + '_COPY'\n      params.headers = JSON.parse(this.EnvInfo.headers);\n      params.db = JSON.parse(this.EnvInfo.db);\n      params.debug_globals_variables = JSON.parse(this.EnvInfo.debug_globals_variables);\n      params.global_variables = JSON.parse(this.EnvInfo.global_variables);\n      const response = await this.$api.createTestEnvs(params);\n      if (response.status === 201) {\n        this.$message({\n          type: 'success',\n          message: '复制成功',\n          duration: 1000\n        });\n        this.getAllEnvs();\n      }\n    },\n    // 选中环境\n    selectEnv(env) {\n      this.active = env.id.toString()\n      this.EnvInfo = {\n        ...env,\n        headers: env.headers ? JSON.stringify(env.headers, null, 4) : '{}',\n        db: env.db ? JSON.stringify(env.db, null, 4) : '{}',\n        debug_globals_variables: env.debug_globals_variables ? JSON.stringify(env.debug_globals_variables, null, 4) : '{}',\n        global_variables: env.global_variables ? JSON.stringify(env.global_variables, null, 4) : '{}'\n      };\n    }\n  },\n  created() {\n    this.getAllEnvs();\n  },\n  mounted() {\n    if (this.testEnvs.length > 0) {\n      // 设置默认选中的测试环境\n      this.selectEnv(this.testEnvs[0]);\n    }\n  }\n};\n</script>\n\n<style scoped>\n.list_box {\n  height: calc(100vh - 68px);\n  box-shadow: 0 0 5px #00aa7f;\n}\n\n.list_box .top-title {\n  text-align: center;\n  font: bold 20px/40px 'microsoft yahei';\n  border-bottom: solid 4px #b3b3b3;\n}\n\n.title {\n  font: bold 14px/28px \"microsoft yahei\";\n}\n\n</style>\n","import { render } from \"./TestEnv.vue?vue&type=template&id=49e8e615&scoped=true\"\nimport script from \"./TestEnv.vue?vue&type=script&lang=js\"\nexport * from \"./TestEnv.vue?vue&type=script&lang=js\"\n\nimport \"./TestEnv.vue?vue&type=style&index=0&id=49e8e615&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-49e8e615\"]])\n\nexport default __exports__"],"names":["class","_createBlock","_component_el_row","gutter","_createVNode","_component_el_col","span","_createElementVNode","_hoisted_1","_component_el_scrollbar","height","_component_el_button","onClick","$options","addEnv","type","plain","size","style","icon","_cache","_component_el_menu","$data","active","_createElementBlock","_Fragment","_renderList","_ctx","testEnvs","item","_component_el_menu_item","$event","selectEnv","index","id","toString","_component_el_icon","_component_Coin","_toDisplayString","name","EnvInfo","_component_el_input","placeholder","prepend","_withCtx","host","_component_el_tabs","_component_el_tab_pane","label","_component_Editor","headers","db","global_variables","debug_globals_variables","_component_el_affix","position","offset","saveEnv","copyEnv","delEnv","global_func","lang","theme","components","Editor","data","computed","mapState","methods","mapActions","params","project","this","pro","response","$api","createTestEnvs","status","$message","success","getAllEnvs","error","message","ElMessageBox","confirm","confirmButtonText","cancelButtonText","then","async","delTestEnvs","ElMessage","duration","length","catch","JSON","parse","updateTestEnvs","env","stringify","created","mounted","__exports__","render"],"sourceRoot":""}